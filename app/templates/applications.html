{% extends "layout.html" %}

{% block title %}Applications - InternIn{% endblock %}
{% block head %}
    {{ super() }}
    <!-- Include your applications-specific CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/applications.css') }}">
{% endblock %}


{% block content %}
<div id="add-app" title="New Application">
   <a href="{{ url_for('applications.add_application') }}">üìù</a>
</div>

{% if internships %}
    <!-- Replace the existing application cards with clickable versions -->
    {% for internship in internships %}
    <div class="application-card" onclick="window.location.href='{{ url_for('applications.application_details', internship_id=internship.id) }}'" style="cursor: pointer;">       
        <div class="application-header">
            <div class="application-main-info">
                <h3 class="company-name">{{ internship.company_name }}</h3>
                <p class="position">{{ internship.job_name }}</p>
                {% if internship.location %}
                    <p class="location">
                        <i class="fas fa-map-marker-alt"></i>
                        {{ internship.location }}
                    </p>
                {% endif %}
            </div>
            <div class="application-status">
                <span class="status-badge status-{{ internship.application_status }}">
                    {{ internship.application_status.title() }}
                </span>
                <div class="application-actions">
                    <a href="{{ url_for('applications.application_details', internship_id=internship.id) }}" class="action-btn view-btn" title="View Details">
                        <i class="fas fa-eye"></i>
                    </a>
                    <a href="{{ url_for('applications.edit_application', internship_id=internship.id) }}" class="action-btn edit-btn" title="Edit">
                        <i class="fas fa-edit"></i>
                    </a>
                    <form method="POST" action="{{ url_for('applications.delete_internship', internship_id=internship.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this application?')">
                        <button type="submit" class="action-btn delete-btn" title="Delete">
                            <i class="fas fa-trash"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
        
        <div class="application-details">
            {% if internship.applied_date %}
                <div class="detail-item">
                    <i class="fas fa-calendar"></i>
                    <span>Applied: {{ internship.applied_date.strftime('%B %d, %Y') }}</span>
                </div>
            {% endif %}
            
            {% if internship.interview_date %}
                <div class="detail-item">
                    <i class="fas fa-handshake"></i>
                    <span>Interview: {{ internship.interview_date.strftime('%B %d, %Y at %I:%M %p') }}</span>
                </div>
            {% endif %}
            
            {% if internship.contacts %}
                <div class="detail-item">
                    <i class="fas fa-users"></i>
                    <span>{{ internship.contacts|length }} Contact(s)</span>
                </div>
            {% endif %}
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="no-applications">
        <h2>No applications yet</h2>
        <p>Start by adding your first internship application!</p>
        <a href="{{ url_for('applications.add_application') }}" class="btn btn-primary">Add Application</a>
    </div>
{% endif %}
{% endblock %}

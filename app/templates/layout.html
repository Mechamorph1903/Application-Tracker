{# 
=====================================================================================
  layout.html (Sitewide Base Template) - Updated by Elyon Aganah, July 2025

  What & Why:
  -----------
    • Fully modernized the global page layout to match our new InternIn visual identity.
    • Replaced the old stacked header/profile-bar with a single, sleek responsive navbar.
    • Navigation is now consistent and persistent across all pages, improving UX and maintainability.
    • Added avatar support with dynamic initials via ui-avatars, auto-filled from the user's username.
    • Navigation "active" states now highlight the current page for clear user context.
    • Main content for all pages now loads in a unified <main> block using Jinja's {% block content %}.
    • CSS and extra-js hooks ({% block extra_css %}, {% block extra_js %}) included for easy extension.
    • Design now scales from desktop to mobile and looks professional out-of-the-box.
  
  How:
  ----
    • Navbar is coded once here—no more copy-paste nav on every page.
    • All main sections (Home, Calendar, Friends, Applications) link with url_for for Flask route safety.
    • Avatar images use ui-avatars.com and are generated dynamically using the logged-in username.
    • Username appears beside the avatar for instant context and future personalization.
    • This base template is now the only file that controls page-wide layout, color, and navigation.
    • All child pages just {% extends "layout.html" %} and fill in {% block content %}.

   Error Encountered & Solution:
  -------------------------------
    • ISSUE: Putting an HTML comment at the top of a Jinja template with `{% block %}` tags caused a 
      "TemplateSyntaxError: Unexpected end of template..." (Jinja thought the block was never closed).
    • FIX: Use Jinja-safe comments `{# ... #}` for all block comments in templates! 
      Do NOT use raw HTML comments at the very top if they wrap any `{% ... %}`.

  Notes for Future Contributors:
  -----------------------------
    • Do not edit navigation or page container markup in individual pages—update here instead!
    • For per-page custom CSS/JS, use the {% block extra_css %} and {% block extra_js %} blocks.
    • The avatar can be replaced with a user-uploaded image in the future; this is placeholder-friendly.
    • If you add more nav links, just copy one of the <a> tags and adjust the url_for route.
    • All new pages should extend layout.html to maintain consistent design.
=====================================================================================
#}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}InternIn{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}">
    {% block extra_css %}{% endblock %}
</head>

<body>
  <!-- NAVBAR (GLOBAL) -->
  <div class="navbar">
    <div class="navbar-logo">InternIn</div>
    <div class="navbar-links">
      <a href="{{ url_for('home') }}" class="{% if request.endpoint == 'home' %}active{% endif %}">Home</a>
      <a href="{{ url_for('calendar') }}" class="{% if request.endpoint == 'calendar' %}active{% endif %}">Calendar</a>
      <a href="{{ url_for('friends') }}" class="{% if request.endpoint == 'friends' %}active{% endif %}">Friends</a>
      <a href="{{ url_for('applications') }}" class="{% if request.endpoint == 'applications' %}active{% endif %}">Applications</a>
    </div>
    <div class="navbar-user">
      <img src="https://ui-avatars.com/api/?name={{ current_user.username | urlencode }}" alt="User Avatar" class="avatar">
      <span class="username">{{ current_user.username }}</span>
    </div>
  </div>

  <main>
    {% block content %}
    <!-- Each page's content will be inserted here -->
    {% endblock %}
  </main>
    <footer>
        <p class="trademark" style="color: #fff; background: #f00;">A Tinubu Special &trade;</p>
    </footer>

  {% block extra_js %}{% endblock %}
</body>
</html>

{% extends "layout.html" %}

{% block title %}Friends | InternIn{% endblock %}
{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/friends.css') }}">
{% endblock %}

{% block content %}
<div class="friends-container">
  <h1 class="page-title">Friends</h1>
  <div class="friends-search-bar">
    <input type="text" id="friend-search" placeholder="Search friends by name, school, or status..." autocomplete="off">
    <a class="add-friend-btn" href="{{ url_for('friends.search_friends') }}">+ Add Friends</a>
  </div>
  <div class="friends-grid">
    <!-- Friend Card 1 - Clickable -->
    <div class="friend-card clickable-card" data-profile-url="{{ url_for('friends.friend_profile', username='mikechen') }}">>
      <div class="friend-main">
        <img src="https://ui-avatars.com/api/?name=Mike+Chen" alt="Mike Chen" class="friend-avatar">
        <div class="friend-info">
          <div class="friend-name-status">
            <div class="friend-name">Mike Chen</div>
          </div>
          <div class="friend-school">Stanford University</div>
          <div class="friend-mutual">2 mutual friends</div>
        </div>
        <div class="privacy-badge public">Public</div>
      </div>
      <div class="friend-activity">Applied to Meta 3h ago</div>
      <hr class="card-separator">
      <div class="friend-stats-row">
        <div class="stat-block">
          <div class="stat-number">10</div>
          <div class="stat-label">Applications</div>
        </div>
        <div class="vertical-separator"></div>
        <div class="stat-block">
          <div class="stat-number">3</div>
          <div class="stat-label">Interviews</div>
        </div>
        <div class="vertical-separator"></div>
        <div class="stat-block">
          <div class="stat-number">1</div>
          <div class="stat-label">Offers</div>
        </div>
      </div>
      <div class="profile-btn-wrapper">
        <span class="profile-btn">Click to View Profile</span>
      </div>
    </div>

    <!-- Friend Card 2 -->
    <div class="friend-card">
      <div class="friend-main">
        <img src="https://ui-avatars.com/api/?name=Sarah+Johnson" alt="Sarah Johnson" class="friend-avatar">
        <div class="friend-info">
          <div class="friend-name-status">
            <div class="friend-name">Sarah Johnson</div>
          </div>
          <div class="friend-school">MIT</div>
          <div class="friend-mutual">3 mutual friends</div>
        </div>
        <div class="privacy-badge private">Private</div>
      </div>
      <div class="friend-activity">Got offer at Stripe</div>
      <hr class="card-separator">
      <div class="friend-stats-row">
        <div class="stat-block">
          <div class="stat-number">7</div>
          <div class="stat-label">Applications</div>
        </div>
        <div class="vertical-separator"></div>
        <div class="stat-block">
          <div class="stat-number">2</div>
          <div class="stat-label">Interviews</div>
        </div>
        <div class="vertical-separator"></div>
        <div class="stat-block">
          <div class="stat-number">0</div>
          <div class="stat-label">Offers</div>
        </div>
      </div>
      <a class="profile-btn" href="{{ url_for('friends.friend_profile', username='sarahjohnson') }}">View Profile</a>
    </div>
    <!-- More friend cards can be added in the same format! -->
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  document.getElementById('friend-search').addEventListener('input', function(e) {
    let filter = e.target.value.toLowerCase();
    document.querySelectorAll('.friend-card').forEach(function(card) {
      let text = card.textContent.toLowerCase();
      card.style.display = text.includes(filter) ? '' : 'none';
    });
  });

  // Make clickable friend cards navigate to profile
  document.querySelectorAll('.clickable-card').forEach(function(card) {
    card.addEventListener('click', function(e) {
      // Don't trigger if clicking on a link or button
      if (e.target.tagName.toLowerCase() === 'a' || e.target.tagName.toLowerCase() === 'button') {
        return;
      }
      const profileUrl = this.getAttribute('data-profile-url');
      if (profileUrl) {
        window.location.href = profileUrl;
      }
    });
  });
</script>
{% endblock %}
